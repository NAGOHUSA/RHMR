<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Real Estate Dashboard | Public Data + DeepSeek AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Complete CSS with all features - 100% free */
        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --secondary: #7c3aed;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --card-bg: #ffffff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        /* Free Data Badge */
        .free-badge {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        /* Dashboard Layout */
        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        
        /* Free Data Source Cards */
        .source-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .source-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .source-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .source-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }
        
        .source-info h3 {
            font-size: 1.1rem;
            margin-bottom: 0.2rem;
        }
        
        .source-info p {
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        /* AI Insights Panel */
        .ai-panel {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .ai-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .ai-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .ai-message {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            border-left: 4px solid #8b5cf6;
        }
        
        .ai-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .ai-btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: none;
            background: rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .ai-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Property Cards */
        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .property-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        
        .property-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .property-image {
            height: 180px;
            background: linear-gradient(45deg, #f1f5f9, #e2e8f0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
        }
        
        .property-content {
            padding: 1.5rem;
        }
        
        .property-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        
        .property-address {
            color: var(--gray);
            margin-bottom: 1rem;
        }
        
        .property-details {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .property-detail {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        /* Charts */
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .chart-wrapper {
            height: 300px;
            position: relative;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                padding: 0.5rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .property-grid {
                grid-template-columns: 1fr;
            }
            
            .ai-actions {
                flex-direction: column;
            }
        }
        
        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e2e8f0;
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header style="background: white; padding: 1rem; border-bottom: 1px solid #e2e8f0;">
        <div style="max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                    <i class="fas fa-home"></i>
                </div>
                <div>
                    <h1 style="margin: 0; font-size: 1.5rem;">Free Real Estate Dashboard</h1>
                    <p style="margin: 0; color: var(--gray); font-size: 0.9rem;">
                        100% Free Data + DeepSeek AI ‚Ä¢ No API Costs
                    </p>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; align-items: center;">
                <span class="free-badge">
                    <i class="fas fa-check-circle"></i> 100% Free
                </span>
                <select id="zipSelect" style="padding: 0.5rem 1rem; border-radius: 8px; border: 1px solid #cbd5e1; background: white; color: var(--dark);">
                    <option value="31088">üìç 31088 - Warner Robins</option>
                    <option value="31093">üìç 31093 - Centerville</option>
                    <option value="31098">üìç 31098 - Bonaire</option>
                </select>
                <button id="refreshBtn" style="padding: 0.5rem 1rem; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer;">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="dashboard">
        <!-- Free Data Sources -->
        <section>
            <h2 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                <i class="fas fa-database"></i> Free Data Sources
            </h2>
            <div class="dashboard-grid">
                <div class="source-card">
                    <div class="source-header">
                        <div class="source-icon">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <div class="source-info">
                            <h3>Public Records</h3>
                            <p>County property data ‚Ä¢ Tax assessments ‚Ä¢ Ownership info</p>
                        </div>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--gray);">
                        Simulated from public county databases. In production, connect to actual county portals.
                    </p>
                </div>
                
                <div class="source-card">
                    <div class="source-header">
                        <div class="source-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="source-info">
                            <h3>Zillow ZHVI</h3>
                            <p>Free CSV downloads ‚Ä¢ Home value index ‚Ä¢ Historical trends</p>
                        </div>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--gray);">
                        Public CSV files updated monthly. Shows housing value trends.
                    </p>
                </div>
                
                <div class="source-card">
                    <div class="source-header">
                        <div class="source-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="source-info">
                            <h3>US Census</h3>
                            <p>Demographic data ‚Ä¢ Income levels ‚Ä¢ Population stats</p>
                        </div>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--gray);">
                        Free API access to American Community Survey data.
                    </p>
                </div>
                
                <div class="source-card">
                    <div class="source-header">
                        <div class="source-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="source-info">
                            <h3>FRED Data</h3>
                            <p>Economic indicators ‚Ä¢ Mortgage rates ‚Ä¢ Housing starts</p>
                        </div>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--gray);">
                        Federal Reserve Economic Data - free public access.
                    </p>
                </div>
            </div>
        </section>
        
        <!-- DeepSeek AI Panel -->
        <div class="ai-panel">
            <div class="ai-header">
                <div class="ai-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div>
                    <h2 style="margin: 0;">DeepSeek AI Assistant</h2>
                    <p style="margin: 0.2rem 0 0 0; opacity: 0.8; font-size: 0.9rem;">
                        Free AI insights powered by DeepSeek's open API
                    </p>
                </div>
            </div>
            
            <div class="ai-message">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                    <h3 style="margin: 0; font-size: 1.1rem;" id="aiTipTitle">Today's AI Insight</h3>
                    <span style="font-size: 0.75rem; background: rgba(139, 92, 246, 0.3); padding: 0.25rem 0.75rem; border-radius: 12px;">
                        <i class="fas fa-bolt"></i> AI Generated
                    </span>
                </div>
                <p id="aiTipContent" style="margin: 0; line-height: 1.6;">
                    Loading AI insight from DeepSeek...
                </p>
                <div class="ai-actions">
                    <button class="ai-btn" onclick="generateNewAIInsight()">
                        <i class="fas fa-sync"></i> New Insight
                    </button>
                    <button class="ai-btn" onclick="saveInsight()">
                        <i class="fas fa-save"></i> Save
                    </button>
                    <button class="ai-btn" onclick="shareInsight()">
                        <i class="fas fa-share"></i> Share
                    </button>
                </div>
            </div>
            
            <div style="margin-top: 1.5rem;">
                <h3 style="margin-bottom: 1rem; font-size: 1rem;">
                    <i class="fas fa-graduation-cap"></i> New Realtor Tip
                </h3>
                <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px;">
                    <p id="newRealtorTip" style="margin: 0; line-height: 1.6;">
                        Focus on understanding local market dynamics before approaching clients.
                    </p>
                    <button onclick="generateNewRealtorTip()" style="margin-top: 0.5rem; padding: 0.5rem 1rem; 
                        background: rgba(16, 185, 129, 0.2); color: #10b981; border: none; 
                        border-radius: 6px; cursor: pointer; font-size: 0.85rem;">
                        <i class="fas fa-lightbulb"></i> Get New Tip
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Market Charts -->
        <section style="margin: 2rem 0;">
            <h2 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                <i class="fas fa-chart-line"></i> Market Analysis
            </h2>
            <div class="dashboard-grid">
                <div class="chart-container">
                    <h3 style="margin-bottom: 1rem; font-size: 1.1rem;">Price Trends</h3>
                    <div class="chart-wrapper">
                        <canvas id="priceChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 style="margin-bottom: 1rem; font-size: 1.1rem;">Inventory Levels</h3>
                    <div class="chart-wrapper">
                        <canvas id="inventoryChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Property Listings -->
        <section>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem;">
                <h2 style="display: flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-home"></i> Active Properties
                </h2>
                <div style="display: flex; gap: 0.5rem;">
                    <select style="padding: 0.5rem; border-radius: 6px; border: 1px solid #cbd5e1; background: white;">
                        <option>Sort by: Price</option>
                        <option>Days on Market</option>
                        <option>Price per SqFt</option>
                    </select>
                    <button onclick="loadMoreProperties()" style="padding: 0.5rem 1rem; background: var(--primary); 
                        color: white; border: none; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-sync"></i> Load More
                    </button>
                </div>
            </div>
            
            <div id="propertiesContainer" class="property-grid">
                <!-- Properties will be loaded here -->
            </div>
        </section>
        
        <!-- Realtor Tools -->
        <section style="margin: 2rem 0;">
            <h2 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                <i class="fas fa-tools"></i> Free Realtor Tools
            </h2>
            <div class="dashboard-grid">
                <div class="source-card">
                    <div class="source-header">
                        <div class="source-icon" style="background: linear-gradient(135deg, #10b981, #34d399);">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <div class="source-info">
                            <h3>Mortgage Calculator</h3>
                            <p>Free payment calculations</p>
                        </div>
                    </div>
                    <div style="margin-top: 1rem;">
                        <input type="number" placeholder="Loan Amount" style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; border: 1px solid #cbd5e1; border-radius: 6px;">
                        <input type="number" placeholder="Interest Rate %" style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem; border: 1px solid #cbd5e1; border-radius: 6px;">
                        <button onclick="calculateMortgage()" style="width: 100%; padding: 0.75rem; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer;">
                            Calculate Payment
                        </button>
                    </div>
                </div>
                
                <div class="source-card">
                    <div class="source-header">
                        <div class="source-icon" style="background: linear-gradient(135deg, #f59e0b, #fbbf24);">
                            <i class="fas fa-file-contract"></i>
                        </div>
                        <div class="source-info">
                            <h3>CMA Generator</h3>
                            <p>Comparative Market Analysis</p>
                        </div>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--gray); margin-top: 1rem;">
                        Generate free CMA reports using public data. No subscription required.
                    </p>
                    <button onclick="generateCMA()" style="width: 100%; margin-top: 1rem; padding: 0.75rem; 
                        background: #f59e0b; color: white; border: none; border-radius: 8px; cursor: pointer;">
                        <i class="fas fa-file-pdf"></i> Generate CMA
                    </button>
                </div>
                
                <div class="source-card">
                    <div class="source-header">
                        <div class="source-icon" style="background: linear-gradient(135deg, #8b5cf6, #a78bfa);">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="source-info">
                            <h3>Client Scripts</h3>
                            <p>AI-generated conversations</p>
                        </div>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--gray); margin-top: 1rem;">
                        Get free AI-generated scripts for client conversations.
                    </p>
                    <button onclick="generateClientScript()" style="width: 100%; margin-top: 1rem; padding: 0.75rem; 
                        background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer;">
                        <i class="fas fa-robot"></i> Generate Script
                    </button>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer style="text-align: center; padding: 2rem; color: var(--gray); font-size: 0.9rem; border-top: 1px solid #e2e8f0;">
        <p>¬© 2024 Free Real Estate Dashboard | 100% Free Data + DeepSeek AI</p>
        <p style="margin-top: 0.5rem; font-size: 0.8rem;">
            <i class="fas fa-lock-open"></i> No API Costs ‚Ä¢ No Subscriptions ‚Ä¢ Open Source
        </p>
        <p style="margin-top: 0.5rem; font-size: 0.8rem;">
            Data Sources: Public Records ‚Ä¢ Census ‚Ä¢ FRED ‚Ä¢ Zillow Public Data ‚Ä¢ DeepSeek AI
        </p>
    </footer>
    
    <script>
        // Free Dashboard JavaScript
        class FreeRealtorDashboard {
            constructor() {
                this.currentZip = '31088';
                this.properties = [];
                this.marketData = {};
                this.aiInsights = [];
                this.charts = {};
                
                this.init();
            }
            
            async init() {
                console.log('üöÄ Initializing Free Realtor Dashboard...');
                
                // Load initial data
                await this.loadDashboardData();
                
                // Initialize charts
                this.initCharts();
                
                // Load properties
                await this.loadProperties();
                
                // Load AI insights
                await this.loadAIInsights();
                
                // Setup event listeners
                this.setupEventListeners();
                
                // Start auto-refresh (free - every 10 minutes)
                this.startAutoRefresh(10 * 60 * 1000);
                
                this.showNotification('Dashboard loaded with free data!', 'success');
            }
            
            async loadDashboardData() {
                try {
                    const response = await fetch(`data/houston-county-ga/dashboard_data.json?t=${Date.now()}`);
                    if (response.ok) {
                        const data = await response.json();
                        this.marketData = data;
                        this.updateUI(data);
                    } else {
                        // Use simulated data
                        this.useSimulatedData();
                    }
                } catch (error) {
                    console.error('Error loading data:', error);
                    this.useSimulatedData();
                }
            }
            
            async loadProperties() {
                try {
                    const response = await fetch(`data/houston-county-ga/${this.currentZip}/properties.json`);
                    if (response.ok) {
                        const data = await response.json();
                        this.properties = data.properties || [];
                        this.renderProperties();
                    } else {
                        this.generateSampleProperties();
                    }
                } catch (error) {
                    console.error('Error loading properties:', error);
                    this.generateSampleProperties();
                }
            }
            
            async loadAIInsights() {
                try {
                    const response = await fetch(`data/houston-county-ga/ai_insights.json`);
                    if (response.ok) {
                        const data = await response.json();
                        this.aiInsights = data;
                        this.renderAIInsights();
                    } else {
                        this.generateSampleAIInsights();
                    }
                } catch (error) {
                    console.error('Error loading AI insights:', error);
                    this.generateSampleAIInsights();
                }
            }
            
            useSimulatedData() {
                // Create realistic simulated data
                this.marketData = {
                    last_updated: new Date().toISOString(),
                    market_summary: {
                        median_price: 289500,
                        inventory_count: 105,
                        avg_days_on_market: 28,
                        market_trend: 'heating',
                        market_health_score: 75,
                        new_listings_30d: 24,
                        price_reductions_30d: 8
                    }
                };
                
                this.updateUI(this.marketData);
            }
            
            updateUI(data) {
                // Update market metrics
                const summary = data.market_summary || {};
                
                // Update charts with data
                if (this.charts.priceChart && summary.median_price) {
                    this.updateCharts(summary);
                }
                
                // Update timestamp
                this.updateTimestamp();
            }
            
            initCharts() {
                // Price Trend Chart
                const priceCtx = document.getElementById('priceChart');
                if (priceCtx) {
                    this.charts.priceChart = new Chart(priceCtx.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                            datasets: [{
                                label: 'Median Price',
                                data: [275, 278, 281, 283, 285, 287, 289, 290, 291, 292, 293, 295],
                                borderColor: '#2563eb',
                                backgroundColor: 'rgba(37, 99, 235, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false }
                            },
                            scales: {
                                y: {
                                    ticks: {
                                        callback: function(value) {
                                            return '$' + (value * 1000).toLocaleString();
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
                
                // Inventory Chart
                const inventoryCtx = document.getElementById('inventoryChart');
                if (inventoryCtx) {
                    this.charts.inventoryChart = new Chart(inventoryCtx.getContext('2d'), {
                        type: 'bar',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                            datasets: [{
                                label: 'Active Listings',
                                data: [135, 128, 118, 112, 108, 105],
                                backgroundColor: '#10b981',
                                borderRadius: 6
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false }
                            }
                        }
                    });
                }
            }
            
            updateCharts(summary) {
                // Update charts with new data
                if (this.charts.priceChart) {
                    // Simulate updating with new data point
                    const currentData = this.charts.priceChart.data.datasets[0].data;
                    const lastValue = currentData[currentData.length - 1];
                    const newValue = lastValue + (Math.random() - 0.5) * 2;
                    
                    currentData.push(newValue);
                    currentData.shift();
                    
                    // Update labels
                    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                    const now = new Date();
                    const currentMonth = now.getMonth();
                    this.charts.priceChart.data.labels = [];
                    
                    for (let i = 0; i < 12; i++) {
                        const monthIndex = (currentMonth - 11 + i + 12) % 12;
                        this.charts.priceChart.data.labels.push(months[monthIndex]);
                    }
                    
                    this.charts.priceChart.update('none');
                }
            }
            
            renderProperties() {
                const container = document.getElementById('propertiesContainer');
                if (!container) return;
                
                container.innerHTML = '';
                
                // Show first 6 properties
                this.properties.slice(0, 6).forEach(property => {
                    const card = this.createPropertyCard(property);
                    container.appendChild(card);
                });
            }
            
            createPropertyCard(property) {
                const card = document.createElement('div');
                card.className = 'property-card';
                
                const priceFormatted = new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 0
                }).format(property.price);
                
                card.innerHTML = `
                    <div class="property-image">
                        <i class="fas fa-home fa-3x"></i>
                    </div>
                    <div class="property-content">
                        <div class="property-price">${priceFormatted}</div>
                        <div class="property-address">${property.address || 'Address not available'}</div>
                        <div class="property-details">
                            <div class="property-detail">
                                <i class="fas fa-bed"></i> ${property.bedrooms || 0} bd
                            </div>
                            <div class="property-detail">
                                <i class="fas fa-bath"></i> ${property.bathrooms || 0} ba
                            </div>
                            <div class="property-detail">
                                <i class="fas fa-ruler-combined"></i> ${(property.sqft || 0).toLocaleString()} sqft
                            </div>
                        </div>
                        <div style="font-size: 0.85rem; color: #64748b; margin-top: 0.5rem;">
                            <i class="fas fa-clock"></i> ${property.days_on_market || 0} days on market
                        </div>
                        <button onclick="dashboard.viewProperty('${property.id}')" style="width: 100%; margin-top: 1rem; padding: 0.75rem; 
                            background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer;">
                            <i class="fas fa-eye"></i> View Details
                        </button>
                    </div>
                `;
                
                return card;
            }
            
            renderAIInsights() {
                if (this.aiInsights.daily_tips && this.aiInsights.daily_tips[this.currentZip]) {
                    const zipTips = this.aiInsights.daily_tips[this.currentZip];
                    const newAgentTip = zipTips.new;
                    
                    if (newAgentTip && newAgentTip.tip) {
                        document.getElementById('aiTipTitle').textContent = newAgentTip.tip.title || 'AI Insight';
                        document.getElementById('aiTipContent').textContent = newAgentTip.tip.tip || '';
                    }
                }
            }
            
            generateSampleProperties() {
                // Generate sample properties
                this.properties = [];
                for (let i = 0; i < 6; i++) {
                    this.properties.push({
                        id: `sample_${i}`,
                        address: `${1000 + i} Sample St, ZIP ${this.currentZip}`,
                        price: 250000 + (i * 50000),
                        bedrooms: 3 + (i % 2),
                        bathrooms: 2 + (i % 2),
                        sqft: 1500 + (i * 300),
                        days_on_market: 10 + (i * 5)
                    });
                }
                
                this.renderProperties();
            }
            
            generateSampleAIInsights() {
                this.aiInsights = {
                    daily_tips: {
                        [this.currentZip]: {
                            new: {
                                tip: {
                                    title: 'Free AI Insight',
                                    tip: 'Using public data sources, we see a balanced market with opportunities for both buyers and sellers. Focus on properties that have been listed 30+ days for potential negotiations.',
                                    action: 'Review 3 properties over 30 days on market'
                                }
                            }
                        }
                    }
                };
                
                this.renderAIInsights();
            }
            
            updateTimestamp() {
                const now = new Date();
                const timeString = now.toLocaleTimeString([], { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                // Update any timestamp displays
                const elements = document.querySelectorAll('[data-timestamp]');
                elements.forEach(el => {
                    el.textContent = `Updated: ${timeString}`;
                });
            }
            
            setupEventListeners() {
                // ZIP code selector
                document.getElementById('zipSelect').addEventListener('change', (e) => {
                    this.currentZip = e.target.value;
                    this.loadProperties();
                    this.loadAIInsights();
                    this.showNotification(`Loading data for ${this.currentZip}...`, 'info');
                });
                
                // Refresh button
                document.getElementById('refreshBtn').addEventListener('click', () => {
                    this.loadDashboardData();
                    this.loadProperties();
                    this.showNotification('Refreshing data...', 'info');
                });
            }
            
            startAutoRefresh(interval) {
                setInterval(() => {
                    this.loadDashboardData();
                    this.updateTimestamp();
                }, interval);
            }
            
            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#2563eb'};
                    color: white;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 10000;
                    animation: slideIn 0.3s ease;
                `;
                
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
            
            // Public methods for buttons
            viewProperty(propertyId) {
                const property = this.properties.find(p => p.id === propertyId);
                if (property) {
                    this.showPropertyModal(property);
                }
            }
            
            showPropertyModal(property) {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 100000;
                    padding: 1rem;
                `;
                
                modal.innerHTML = `
                    <div style="background: white; border-radius: 12px; padding: 2rem; max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h2 style="margin: 0;">Property Details</h2>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" 
                                style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #64748b;">
                                &times;
                            </button>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: #1e293b;">
                                ${new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(property.price)}
                            </div>
                            <div style="color: #64748b; margin-top: 0.5rem;">${property.address}</div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                            <div>
                                <div style="color: #64748b; font-size: 0.85rem;">Bedrooms</div>
                                <div style="font-weight: 600;">${property.bedrooms}</div>
                            </div>
                            <div>
                                <div style="color: #64748b; font-size: 0.85rem;">Bathrooms</div>
                                <div style="font-weight: 600;">${property.bathrooms}</div>
                            </div>
                            <div>
                                <div style="color: #64748b; font-size: 0.85rem;">Square Feet</div>
                                <div style="font-weight: 600;">${property.sqft.toLocaleString()}</div>
                            </div>
                            <div>
                                <div style="color: #64748b; font-size: 0.85rem;">Days on Market</div>
                                <div style="font-weight: 600;">${property.days_on_market}</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                            <button onclick="dashboard.generatePropertyAnalysis('${property.id}')" 
                                style="flex: 1; padding: 1rem; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                <i class="fas fa-robot"></i> AI Analysis
                            </button>
                            <button onclick="dashboard.saveProperty('${property.id}')"
                                style="flex: 1; padding: 1rem; background: #f1f5f9; color: #1e293b; border: 1px solid #cbd5e1; border-radius: 8px; cursor: pointer;">
                                <i class="fas fa-star"></i> Save
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
            }
            
            generatePropertyAnalysis(propertyId) {
                const property = this.properties.find(p => p.id === propertyId);
                if (property) {
                    // In a real implementation, this would call the DeepSeek API
                    this.showNotification('AI analysis would be generated via DeepSeek API', 'info');
                }
            }
            
            saveProperty(propertyId) {
                // Save to localStorage
                const saved = JSON.parse(localStorage.getItem('saved_properties') || '[]');
                saved.push({
                    id: propertyId,
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem('saved_properties', JSON.stringify(saved));
                
                this.showNotification('Property saved to favorites', 'success');
            }
        }
        
        // Global functions for button onclick events
        function generateNewAIInsight() {
            dashboard.showNotification('Generating new AI insight via DeepSeek...', 'info');
            // In production, this would call the API
        }
        
        function saveInsight() {
            const title = document.getElementById('aiTipTitle').textContent;
            const content = document.getElementById('aiTipContent').textContent;
            
            const saved = JSON.parse(localStorage.getItem('saved_insights') || '[]');
            saved.push({
                title: title,
                content: content,
                timestamp: new Date().toISOString()
            });
            localStorage.setItem('saved_insights', JSON.stringify(saved));
            
            dashboard.showNotification('Insight saved to notes', 'success');
        }
        
        function shareInsight() {
            const title = document.getElementById('aiTipTitle').textContent;
            const content = document.getElementById('aiTipContent').textContent;
            
            const text = `${title}\n\n${content}`;
            navigator.clipboard.writeText(text);
            dashboard.showNotification('Insight copied to clipboard', 'success');
        }
        
        function generateNewRealtorTip() {
            // In production, this would call DeepSeek API
            const tips = [
                "Focus on building relationships rather than just making sales. Your network is your net worth.",
                "Always be prepared with market data. Knowledge builds instant credibility with clients.",
                "Practice your listing presentations until they feel natural and confident.",
                "Follow up consistently but respectfully. Persistence pays off in real estate.",
                "Specialize in a neighborhood or property type to become the local expert."
            ];
            
            const randomTip = tips[Math.floor(Math.random() * tips.length)];
            document.getElementById('newRealtorTip').textContent = randomTip;
            dashboard.showNotification('New tip generated', 'info');
        }
        
        function calculateMortgage() {
            dashboard.showNotification('Mortgage calculator would compute payments', 'info');
        }
        
        function generateCMA() {
            dashboard.showNotification('CMA would be generated from public data', 'info');
        }
        
        function generateClientScript() {
            dashboard.showNotification('AI would generate client conversation script', 'info');
        }
        
        function loadMoreProperties() {
            dashboard.showNotification('Loading more properties...', 'info');
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Initialize dashboard
        const dashboard = new FreeRealtorDashboard();
        window.dashboard = dashboard;
    </script>
</body>
</html>
